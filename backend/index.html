<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Transaction Comparison</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <canvas id="transactionChart"></canvas>

  <script>
    async function fetchData() {
      try {
        const response = await fetch("http://localhost:3000/api/transaction-counts");
        const data = await response.json();
        console.log("Fetched Data:", data); // Debugging

        const ctx = document.getElementById("transactionChart").getContext("2d");
        new Chart(ctx, {
          type: "bar",
          data: {
            labels: [
              "Incoming Money",
              "Payments to Code Holders",
              "Transfers to Mobile Numbers",
              "Bank Deposits",
              "Transactions by Third Parties",
              "Withdrawals from Agents",
              "Internet & Voice Bundles",
              "Bank Transfers"
            ],
            datasets: [{
              label: "Number of Transactions",
              data: Object.values(data),
              backgroundColor: [
                "rgba(255, 99, 132, 0.5)",
                "rgba(54, 162, 235, 0.5)",
                "rgba(255, 206, 86, 0.5)",
                "rgba(75, 192, 192, 0.5)",
                "rgba(153, 102, 255, 0.5)",
                "rgba(255, 159, 64, 0.5)",
                "rgba(201, 203, 207, 0.5)",
                "rgba(50, 205, 50, 0.5)"
              ],
              borderWidth: 1
            }]
          },
          options: {
            responsive: true,
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });
      } catch (error) {
        console.error("Error fetching data:", error);
      }
    }

    fetchData();
  </script>

</body>

</html>